<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Results</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="{{ url_for('static', filename='style_index.css') }}" rel="stylesheet" type="text/css" />

  </head>
  <body id="box">
  <h1 class="w3-text-blue">Results</h1>
  <br>
    <div class="w3-container w3-card-4">

      <canvas id="myChart"></canvas>
      <script type="text/javascript">
        const name = '{{nom}}';
        const firstname = '{{prenom}}';
        const data={{file|tojson|safe}};
        console.log(data)

          var myContext = document.getElementById("myChart");
          console.log(Object.keys(data));
          var myChart = new Chart(myContext, {
            type: 'bar',
            data: {
              labels:Object.keys(data),
              datasets: [
                 {
                 label: firstname + " " + name,
                 data: Object.values(data),
                 backgroundColor: 'rgba(255, 99, 132, 0.2)'
                 },{
                 label: "Average",
                 data: [3,2,3,4,5,2,3.16],
                 backgroundColor: 'rgba(54, 162, 235, 0.2)'
                 }
              ],
            },
            options:{
                scales: {
                  yAxes: [{
                      ticks: {
                          beginAtZero:true
                      }
                  }]
                },
                legend:{
                  display:true,
                  position:'right',
                  labels:{
                    fontSize:20,
                    padding:10
                  }
                },
                layout: {
                  padding: {
                      left: 10,
                      right: 10,
                      top: 30,
                      bottom: 10
                  }
                }
              }
            }
          )




      </script>
    </div>
  </body>
</html>
